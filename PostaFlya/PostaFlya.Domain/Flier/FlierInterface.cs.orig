using System;
using System.Collections.Generic;
using System.Linq;
using PostaFlya.Domain.Behaviour;
using PostaFlya.Domain.Browser;
using PostaFlya.Domain.Comments;
using PostaFlya.Domain.Likes;
using PostaFlya.Domain.Tag;
using WebSite.Infrastructure.Domain;

namespace PostaFlya.Domain.Flier
{
    public static class FlierInterfaceExtensions
    {
        public static void CopyFieldsFrom(this FlierInterface target, FlierInterface source)
        {
            EntityInterfaceExtensions.CopyFieldsFrom(target, source);
            target.Title = source.Title;
            target.Description = source.Description;
            target.Tags = new Tags(source.Tags);
            target.Location = new Location.Location(source.Location);
            target.Image = source.Image;
            target.BrowserId = source.BrowserId;
            target.EffectiveDate = source.EffectiveDate;
            target.CreateDate = source.CreateDate;
            target.FlierBehaviour = source.FlierBehaviour;
            target.Status = source.Status;
<<<<<<< HEAD
            target.ImageList = source.ImageList;
        }

        public static int GetEffectiveDateOrder(this FlierInterface flier)
        {
            //A rough estimation of GMT offset
            //offset = direction * longitude * 24 / 360 
            //where direction is 1 for east, -1 for west, and longitude is in (-180,180)
            //will assume that effective date will be represented as UTC/GMT
            //this means when a flier is posted we should convert from longitude
            //to GMT offset and then add to DateTime.UtcNow
            return GetEffectiveDateOrder(flier.EffectiveDate);
        }

        public static int GetEffectiveDateOrder(DateTime effectiveDate)
        {
            //A rough estimation of GMT offset
            //offset = direction * longitude * 24 / 360 
            //where direction is 1 for east, -1 for west, and longitude is in (-180,180)
            //will assume that effective date will be represented as UTC/GMT
            //this means when a flier is posted we should convert from longitude
            //to GMT offset and then add to DateTime.UtcNow
            return Math.Abs(DateTime.UtcNow.Subtract(effectiveDate).Days);
        }

        
=======
        }        
>>>>>>> a7d4508f9a772e5c65fb28c565236f362c988993
    }
    public interface FlierInterface : 
        EntityInterface, 
        BrowserIdInterface, 
        LikeableInterface,
        CommentableInterface
    {
        string Title { get; set; }
        string Description { get; set; }
        Tags Tags { get; set; }
        Location.Location Location { get; set; }
        Guid? Image { get; set; }
        DateTime EffectiveDate { get; set; }
        DateTime CreateDate { get; set; }
        FlierStatus Status { get; set; }
        FlierBehaviour FlierBehaviour { get; set; }
<<<<<<< HEAD
        int GetOrderWeight(FlierWeightingStrategyInterface weightingStrategy);
        List<FlierImage> ImageList { get; set; }
=======
>>>>>>> a7d4508f9a772e5c65fb28c565236f362c988993
    }
}